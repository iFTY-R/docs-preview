import{_ as b,a as v,b as _}from"./chunks/FunctionInfo.vue_vue_type_script_setup_true_lang.DyMTqidA.js";import{_ as E}from"./chunks/DemoContainer.vue_vue_type_script_setup_true_lang.DxNSmAoY.js";import{z as B,r as f,d as F,B as x,i as h,o as k,F as S,j as i,y as p,t as u,H as l,k as C,a0 as P,a3 as w,V as R,g,Y as T,w as V}from"./chunks/vue.CKrRORKQ.js";import{t as U}from"./chunks/index.xAcUqA8Y.js";import{d as I,t as N}from"./chunks/metadata.DZbmnv7Q.js";import{u as A}from"./chunks/index.DdrW3HGD.js";import{u as O}from"./chunks/index.oqMf4-M6.js";import"./chunks/utils.B5e_uQLX.js";import"./chunks/index.CNq88Uqw.js";import"./chunks/general.CGRH32nb.js";import"./chunks/index.DfAUkXFk.js";function W(c){const{name:r,window:s=I}=c,t=O(()=>s&&"BroadcastChannel"in s),e=B(!1),a=f(),d=f(),n=B(null),y=o=>{a.value&&a.value.postMessage(o)},m=()=>{a.value&&a.value.close(),e.value=!0};return t.value&&U(()=>{n.value=null,a.value=new BroadcastChannel(r);const o={passive:!0};A(a,"message",D=>{d.value=D.data},o),A(a,"messageerror",D=>{n.value=D},o),A(a,"close",()=>{e.value=!0},o)}),N(()=>{m()}),{isSupported:t,channel:a,data:d,post:y,close:m,error:n,isClosed:e}}const $={key:0},j={key:0},M={key:1},z={key:1},H=F({__name:"demo",setup(c){const{isSupported:r,data:s,post:t,error:e}=W({name:"vueuse-demo-channel"}),a=B("");return x(s,()=>{s.value&&alert(s.value)}),(d,n)=>(k(),h(S,null,[i("div",null,[i("p",null,[n[2]||(n[2]=p(" 支持: ")),i("b",null,u(l(r)),1)]),n[3]||(n[3]=i("p",null,"请在至少两个Tab中打开此页面",-1))]),l(r)?(k(),h("div",$,[i("form",{onSubmit:n[1]||(n[1]=R(y=>l(t)(a.value),["prevent"]))},[P(i("input",{"onUpdate:modelValue":n[0]||(n[0]=y=>a.value=y),type:"text"},null,512),[[w,a.value]]),n[4]||(n[4]=i("button",{type:"submit"}," 发送消息 ",-1))],32),l(s)?(k(),h("p",j," 收到: "+u(l(s)),1)):C("",!0),l(e)?(k(),h("p",M," 错误: "+u(l(e)),1)):C("",!0)])):(k(),h("div",z," 您的浏览器不支持广播频道 Web API。 "))],64))}}),ns=JSON.parse('{"title":"useBroadcastChannel","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"core/useBroadcastChannel/index.md","filePath":"core/useBroadcastChannel/index.md"}'),J={name:"core/useBroadcastChannel/index.md"},es=Object.assign(J,{setup(c){return(r,s)=>{const t=b,e=E,a=v,d=_;return k(),h("div",null,[s[1]||(s[1]=i("h1",{id:"usebroadcastchannel",tabindex:"-1"},[p("useBroadcastChannel "),i("a",{class:"header-anchor",href:"#usebroadcastchannel","aria-label":"Permalink to “useBroadcastChannel”"},"​")],-1)),g(t,{fn:"useBroadcastChannel"}),s[2]||(s[2]=i("p",null,[p("响应式 "),i("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel",target:"_blank",rel:"noreferrer"},"BroadcastChannel API"),p("。")],-1)),s[3]||(s[3]=i("p",null,"在组件卸载时自动关闭广播频道。",-1)),s[4]||(s[4]=i("h2",{id:"demo",tabindex:"-1"},[p("Demo "),i("a",{class:"header-anchor",href:"#demo","aria-label":"Permalink to “Demo”"},"​")],-1)),g(e,null,{default:V(()=>[s[0]||(s[0]=i("p",{class:"demo-source-link"},[i("a",{href:"https://github.com/vueuse/vueuse/blob/main/packages/core/useBroadcastChannel/demo.vue",target:"_blank"},"source")],-1)),g(H)]),_:1}),s[5]||(s[5]=T("",9)),g(a,{fn:"useBroadcastChannel"}),s[6]||(s[6]=i("h2",{id:"changelog",tabindex:"-1"},[p("Changelog "),i("a",{class:"header-anchor",href:"#changelog","aria-label":"Permalink to “Changelog”"},"​")],-1)),g(d,{fn:"useBroadcastChannel"})])}}});export{ns as __pageData,es as default};
