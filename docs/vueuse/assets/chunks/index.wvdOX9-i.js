import{u as b}from"./index._HNhcM3-.js";import{n as m}from"./metadata.DZbmnv7Q.js";import{z as n,r as g}from"./vue.CKrRORKQ.js";import{b as z}from"./general.CGRH32nb.js";function P(s,u,v){const{immediate:h=!0,delay:d=0,onError:w=m,onSuccess:p=m,resetOnExecute:y=!0,shallow:x=!0,throwError:E}=v??{},r=x?n(u):g(u),c=n(!1),a=n(!1),l=n(void 0);async function f(e=0,...o){y&&(r.value=u),l.value=void 0,c.value=!1,a.value=!0,e>0&&await z(e);const R=typeof s=="function"?s(...o):s;try{const t=await R;r.value=t,c.value=!0,p(t)}catch(t){if(l.value=t,w(t),E)throw t}finally{a.value=!1}return r.value}h&&f(d);const i={state:r,isReady:c,isLoading:a,error:l,execute:f};function L(){return new Promise((e,o)=>{b(a).toBe(!1).then(()=>e(i)).catch(o)})}return{...i,then(e,o){return L().then(e,o)}}}export{P as u};
