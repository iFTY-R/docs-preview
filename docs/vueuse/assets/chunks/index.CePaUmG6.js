import{c as f}from"./index.D1OSy3Nc.js";import{r as l,A as o,E as _}from"./vue.CKrRORKQ.js";import{h as E}from"./metadata.DZbmnv7Q.js";function v(t){return t}function F(t,s){return t.value=s}function H(t){return t?typeof t=="function"?t:f:v}function O(t){return t?typeof t=="function"?t:f:v}function w(t,s={}){const{clone:r=!1,dump:p=H(r),parse:m=O(r),setSource:h=F}=s;function i(){return _({snapshot:p(t.value),timestamp:E()})}const u=l(i()),e=l([]),a=l([]),c=n=>{h(t,m(n.snapshot)),u.value=n},d=()=>{e.value.unshift(u.value),u.value=i(),s.capacity&&e.value.length>s.capacity&&e.value.splice(s.capacity,Number.POSITIVE_INFINITY),a.value.length&&a.value.splice(0,a.value.length)},y=()=>{e.value.splice(0,e.value.length),a.value.splice(0,a.value.length)},S=()=>{const n=e.value.shift();n&&(a.value.unshift(u.value),c(n))},g=()=>{const n=a.value.shift();n&&(e.value.unshift(u.value),c(n))},I=()=>{c(u.value)},N=o(()=>[u.value,...e.value]),R=o(()=>e.value.length>0),k=o(()=>a.value.length>0);return{source:t,undoStack:e,redoStack:a,last:u,history:N,canUndo:R,canRedo:k,clear:y,commit:d,reset:I,undo:S,redo:g}}export{w as u};
