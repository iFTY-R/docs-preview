import{b as m}from"./metadata.DZbmnv7Q.js";import{u as c}from"./index.DdrW3HGD.js";import{u as v}from"./index.oqMf4-M6.js";import{c as d}from"./general.CGRH32nb.js";import{z as l,ad as y}from"./vue.CKrRORKQ.js";function P(e,p={}){const{controls:r=!1,navigator:a=m}=p,o=v(()=>a&&"permissions"in a),t=l(),f=typeof e=="string"?{name:e}:e,s=l(),n=()=>{var u;s.value=((u=t.value)==null?void 0:u.state)??"prompt"};c(t,"change",n,{passive:!0});const i=d(async()=>{if(o.value){if(!t.value)try{t.value=await a.permissions.query(f)}catch{t.value=void 0}finally{n()}if(r)return y(t.value)}});return i(),r?{state:s,isSupported:o,query:i}:s}export{P as u};
