import{w as E}from"./index.ChIAw1Ez.js";import{d as P}from"./metadata.DZbmnv7Q.js";import{u as y}from"./index.DdrW3HGD.js";import{D as m}from"./vue.CKrRORKQ.js";function U(i="history",$={}){const{initialValue:o={},removeNullishValues:w=!0,removeFalsyValues:g=!1,write:S=!0,writeMode:v="replace",window:t=P}=$;if(!t)return m(o);const a=m({});function x(){if(i==="history")return t.location.search||"";if(i==="hash"){const r=t.location.hash||"",e=r.indexOf("?");return e>0?r.slice(e):""}else return(t.location.hash||"").replace(/^#/,"")}function c(r){const e=r.toString();if(i==="history")return`${e?`?${e}`:""}${t.location.hash||""}`;if(i==="hash-params")return`${t.location.search||""}${e?`#${e}`:""}`;const s=t.location.hash||"#",n=s.indexOf("?");return n>0?`${t.location.search||""}${s.slice(0,n)}${e?`?${e}`:""}`:`${t.location.search||""}${s}${e?`?${e}`:""}`}function l(){return new URLSearchParams(x())}function u(r){const e=new Set(Object.keys(a));for(const s of r.keys()){const n=r.getAll(s);a[s]=n.length>1?n:r.get(s)||"",e.delete(s)}Array.from(e).forEach(s=>delete a[s])}const{pause:O,resume:b}=E(a,()=>{const r=new URLSearchParams("");Object.keys(a).forEach(e=>{const s=a[e];Array.isArray(s)?s.forEach(n=>r.append(e,n)):w&&s==null||g&&!s?r.delete(e):r.set(e,s)}),h(r,!1)},{deep:!0});function h(r,e){O(),e&&u(r),v==="replace"?t.history.replaceState(t.history.state,t.document.title,t.location.pathname+c(r)):t.history.pushState(t.history.state,t.document.title,t.location.pathname+c(r)),b()}function f(){S&&h(l(),!0)}const p={passive:!0};y(t,"popstate",f,p),i!=="history"&&y(t,"hashchange",f,p);const d=l();return d.keys().next().value?u(d):Object.assign(a,o),a}export{U as u};
