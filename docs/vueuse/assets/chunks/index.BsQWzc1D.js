import{d as O,n,c as M}from"./metadata.DZbmnv7Q.js";import{u}from"./index.CNq88Uqw.js";import{u as c}from"./index.DdrW3HGD.js";import{a1 as f}from"./vue.CKrRORKQ.js";let k=!1;function F(i,m,y={}){const{window:o=O,ignore:A=[],capture:P=!0,detectIframe:b=!1,controls:d=!1}=y;if(!o)return d?{stop:n,cancel:n,trigger:n}:n;if(M&&!k){k=!0;const e={passive:!0};Array.from(o.document.body.children).forEach(t=>c(t,"click",n,e)),c(o.document.documentElement,"click",n,e)}let s=!0;const p=e=>f(A).some(t=>{if(typeof t=="string")return Array.from(o.document.querySelectorAll(t)).some(r=>r===e.target||e.composedPath().includes(r));{const r=u(t);return r&&(e.target===r||e.composedPath().includes(r))}});function T(e){const t=f(e);return t&&t.$.subTree.shapeFlag===16}function w(e,t){const r=f(e),a=r.$.subTree&&r.$.subTree.children;return a==null||!Array.isArray(a)?!1:a.some(E=>E.el===t.target||t.composedPath().includes(E.el))}const h=e=>{const t=u(i);if(e.target!=null&&!(!(t instanceof Element)&&T(i)&&w(i,e))&&!(!t||t===e.target||e.composedPath().includes(t))){if("detail"in e&&e.detail===0&&(s=!p(e)),!s){s=!0;return}m(e)}};let l=!1;const I=[c(o,"click",e=>{l||(l=!0,setTimeout(()=>{l=!1},0),h(e))},{passive:!0,capture:P}),c(o,"pointerdown",e=>{const t=u(i);s=!p(e)&&!!(t&&!e.composedPath().includes(t))},{passive:!0}),b&&c(o,"blur",e=>{setTimeout(()=>{var r;const t=u(i);((r=o.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(t!=null&&t.contains(o.document.activeElement))&&m(e)},0)},{passive:!0})].filter(Boolean),g=()=>I.forEach(e=>e());return d?{stop:g,cancel:()=>{s=!1},trigger:e=>{s=!0,h(e),s=!1}}:g}export{F as o};
