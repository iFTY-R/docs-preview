import{d as g,e as A,n as r,t as I}from"./metadata.DZbmnv7Q.js";import{u as s}from"./index.CNq88Uqw.js";import{u as S}from"./index.oqMf4-M6.js";import{A as x,a1 as y,z as E,B as W}from"./vue.CKrRORKQ.js";import{t as z}from"./general.CGRH32nb.js";function V(p,f,m={}){const{root:v,rootMargin:d="0px",threshold:h=0,window:a=g,immediate:n=!0}=m,u=S(()=>a&&"IntersectionObserver"in a),w=x(()=>{const o=y(p);return z(o).map(s).filter(A)});let t=r;const e=E(n),b=u.value?W(()=>[w.value,s(v),e.value],([o,O])=>{if(t(),!e.value||!o.length)return;const c=new IntersectionObserver(f,{root:s(O),rootMargin:d,threshold:h});o.forEach(l=>l&&c.observe(l)),t=()=>{c.disconnect(),t=r}},{immediate:n,flush:"post"}):r,i=()=>{t(),b(),e.value=!1};return I(i),{isSupported:u,isActive:e,pause(){t(),e.value=!1},resume(){e.value=!0},stop:i}}export{V as u};
