import{b as y,c as b}from"./filters.BhzE80JT.js";import{z as i,B as v}from"./vue.CKrRORKQ.js";function m(n,p,h={}){const{eventFilter:g=y,...l}=h,f=b(g,p);let r,o,u;if(l.flush==="sync"){const t=i(!1);o=()=>{},r=e=>{t.value=!0,e(),t.value=!1},u=v(n,(...e)=>{t.value||f(...e)},l)}else{const t=[],e=i(0),a=i(0);o=()=>{e.value=a.value},t.push(v(n,()=>{a.value++},{...l,flush:"sync"})),r=s=>{const c=a.value;s(),e.value+=a.value-c},t.push(v(n,(...s)=>{const c=e.value>0&&e.value===a.value;e.value=0,a.value=0,!c&&f(...s)},l)),u=()=>{t.forEach(s=>s())}}return{stop:u,ignoreUpdates:r,ignorePrevAsyncUpdates:o}}export{m as w};
