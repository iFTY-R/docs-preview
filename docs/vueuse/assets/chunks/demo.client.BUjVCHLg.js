import{z as S,r as O,a1 as A,ad as E,d as P,i as R,o as $,j as l,a0 as p,a3 as m,H as o,t as w,F as G}from"./vue.CKrRORKQ.js";import{s as U}from"./utils.DQ_X3vVv.js";import{w as I}from"./index.ChIAw1Ez.js";import"./index.CECeAqpN.js";import"./index.BP7PwJJ3.js";import"./filters.BhzE80JT.js";import"./index.DFBK12yr.js";import"./metadata.DZbmnv7Q.js";function v(a){return new Promise((e,r)=>{a.oncomplete=a.onsuccess=()=>e(a.result),a.onabort=a.onerror=()=>r(a.error)})}function K(a,e){const r=indexedDB.open(a);r.onupgradeneeded=()=>r.result.createObjectStore(e);const u=v(r);return(f,s)=>u.then(d=>s(d.transaction(e,f).objectStore(e)))}let b;function c(){return b||(b=K("keyval-store","keyval")),b}function M(a,e=c()){return e("readonly",r=>v(r.get(a)))}function W(a,e,r=c()){return r("readwrite",u=>(u.put(e,a),v(u.transaction)))}function Y(a,e,r=c()){return r("readwrite",u=>new Promise((f,s)=>{u.get(a).onsuccess=function(){try{u.put(e(this.result),a),f(v(u.transaction))}catch(d){s(d)}}}))}function k(a,e=c()){return e("readwrite",r=>(r.delete(a),v(r.transaction)))}function x(a,e,r={}){const{flush:u="pre",deep:f=!0,shallow:s=!1,onError:d=i=>{console.error(i)},writeDefaults:V=!0}=r,t=S(!1),n=(s?S:O)(e),y=A(e);async function B(){try{const i=await M(a);i===void 0?y!=null&&V&&await W(a,y):n.value=i}catch(i){d(i)}t.value=!0}B();async function j(){try{n.value==null?await k(a):await Y(a,()=>E(n.value))}catch(i){d(i)}}const{pause:D,resume:z}=I(n,()=>j(),{flush:u,deep:f});async function F(i){D(),n.value=i,await j(),z()}return{set:F,isFinished:t,data:n}}const C={lang:"json"},H={lang:"json"},g="vue-use-idb-keyval",h=P({__name:"demo.client",setup(a){const e=x(`${g}-object`,{name:"Banana",color:"Yellow",size:"Medium",count:0}),r=U(e.data),u=x(`${g}-string`,"foobar"),f=u,s=x(`${g}-array`,["foo","bar","baz"]),d=U(s.data);return(V,t)=>($(),R(G,null,[t[8]||(t[8]=l("h5",null,"Object",-1)),p(l("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o(e).data.value.name=n),type:"text"},null,512),[[m,o(e).data.value.name]]),p(l("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o(e).data.value.color=n),type:"text"},null,512),[[m,o(e).data.value.color]]),p(l("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o(e).data.value.size=n),type:"text"},null,512),[[m,o(e).data.value.size]]),p(l("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o(e).data.value.count=n),type:"range",min:"0",step:"0.01",max:"1000"},null,512),[[m,o(e).data.value.count,void 0,{number:!0}]]),l("pre",C,w(o(r)),1),t[9]||(t[9]=l("br",null,null,-1)),t[10]||(t[10]=l("h5",null,"String",-1)),p(l("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o(u).data.value=n),type:"text"},null,512),[[m,o(u).data.value]]),l("pre",null,w(o(f)),1),t[11]||(t[11]=l("br",null,null,-1)),t[12]||(t[12]=l("h5",null,"Array",-1)),p(l("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>o(s).data.value[0]=n),type:"text"},null,512),[[m,o(s).data.value[0]]]),p(l("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o(s).data.value[1]=n),type:"text"},null,512),[[m,o(s).data.value[1]]]),p(l("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o(s).data.value[2]=n),type:"text"},null,512),[[m,o(s).data.value[2]]]),l("pre",H,w(o(d)),1)],64))}});export{h as default};
