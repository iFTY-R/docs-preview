import{_ as I,a as M,b as q}from"./chunks/FunctionInfo.vue_vue_type_script_setup_true_lang.DyMTqidA.js";import{_ as Y}from"./chunks/DemoContainer.vue_vue_type_script_setup_true_lang.DxNSmAoY.js";import{t as T}from"./chunks/metadata.DZbmnv7Q.js";import{r as $,B as F,d as J,I as z,i as O,o as U,t as G,H as K,j as o,g as b,Y as L,y as u,w as Q}from"./chunks/vue.CKrRORKQ.js";import"./chunks/utils.B5e_uQLX.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E=function(t,i){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n])},E(t,i)};function c(t,i){E(t,i);function s(){this.constructor=t}t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function m(t){return typeof t=="function"}var B=!1,p={set useDeprecatedSynchronousErrorHandling(t){if(t){var i=new Error;""+i.stack}B=t},get useDeprecatedSynchronousErrorHandling(){return B}};function f(t){setTimeout(function(){throw t},0)}var _={closed:!0,next:function(t){},error:function(t){if(p.useDeprecatedSynchronousErrorHandling)throw t;f(t)},complete:function(){}},W=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function X(t){return t!==null&&typeof t=="object"}var Z=function(){function t(i){return Error.call(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(s,e){return e+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i,this}return t.prototype=Object.create(Error.prototype),t}(),g=Z,y=function(){function t(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}return t.prototype.unsubscribe=function(){var i;if(!this.closed){var s=this,e=s._parentOrParents,n=s._ctorUnsubscribe,r=s._unsubscribe,a=s._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof t)e.remove(this);else if(e!==null)for(var h=0;h<e.length;++h){var l=e[h];l.remove(this)}if(m(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(S){i=S instanceof g?j(S.errors):[S]}}if(W(a))for(var h=-1,V=a.length;++h<V;){var A=a[h];if(X(A))try{A.unsubscribe()}catch(D){i=i||[],D instanceof g?i=i.concat(j(D.errors)):i.push(D)}}if(i)throw new g(i)}},t.prototype.add=function(i){var s=i;if(!i)return t.EMPTY;switch(typeof i){case"function":s=new t(i);case"object":if(s===this||s.closed||typeof s.unsubscribe!="function")return s;if(this.closed)return s.unsubscribe(),s;if(!(s instanceof t)){var e=s;s=new t,s._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}var n=s._parentOrParents;if(n===null)s._parentOrParents=this;else if(n instanceof t){if(n===this)return s;s._parentOrParents=[n,this]}else if(n.indexOf(this)===-1)n.push(this);else return s;var r=this._subscriptions;return r===null?this._subscriptions=[s]:r.push(s),s},t.prototype.remove=function(i){var s=this._subscriptions;if(s){var e=s.indexOf(i);e!==-1&&s.splice(e,1)}},t.EMPTY=function(i){return i.closed=!0,i}(new t),t}();function j(t){return t.reduce(function(i,s){return i.concat(s instanceof g?s.errors:s)},[])}var v=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),d=function(t){c(i,t);function i(s,e,n){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=_;break;case 1:if(!s){r.destination=_;break}if(typeof s=="object"){s instanceof i?(r.syncErrorThrowable=s.syncErrorThrowable,r.destination=s,s.add(r)):(r.syncErrorThrowable=!0,r.destination=new w(r,s));break}default:r.syncErrorThrowable=!0,r.destination=new w(r,s,e,n);break}return r}return i.prototype[v]=function(){return this},i.create=function(s,e,n){var r=new i(s,e,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(s){this.isStopped||this._next(s)},i.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},i.prototype._next=function(s){this.destination.next(s)},i.prototype._error=function(s){this.destination.error(s),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var s=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=s,this},i}(y),w=function(t){c(i,t);function i(s,e,n,r){var a=t.call(this)||this;a._parentSubscriber=s;var h,l=a;return m(e)?h=e:e&&(h=e.next,n=e.error,r=e.complete,e!==_&&(l=Object.create(e),m(l.unsubscribe)&&a.add(l.unsubscribe.bind(l)),l.unsubscribe=a.unsubscribe.bind(a))),a._context=l,a._next=h,a._error=n,a._complete=r,a}return i.prototype.next=function(s){if(!this.isStopped&&this._next){var e=this._parentSubscriber;!p.useDeprecatedSynchronousErrorHandling||!e.syncErrorThrowable?this.__tryOrUnsub(this._next,s):this.__tryOrSetError(e,this._next,s)&&this.unsubscribe()}},i.prototype.error=function(s){if(!this.isStopped){var e=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)!n||!e.syncErrorThrowable?(this.__tryOrUnsub(this._error,s),this.unsubscribe()):(this.__tryOrSetError(e,this._error,s),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=s,e.syncErrorThrown=!0):f(s),this.unsubscribe();else{if(this.unsubscribe(),n)throw s;f(s)}}},i.prototype.complete=function(){var s=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return s._complete.call(s._context)};!p.useDeprecatedSynchronousErrorHandling||!e.syncErrorThrowable?(this.__tryOrUnsub(n),this.unsubscribe()):(this.__tryOrSetError(e,n),this.unsubscribe())}else this.unsubscribe()}},i.prototype.__tryOrUnsub=function(s,e){try{s.call(this._context,e)}catch(n){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw n;f(n)}},i.prototype.__tryOrSetError=function(s,e,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return p.useDeprecatedSynchronousErrorHandling?(s.syncErrorValue=r,s.syncErrorThrown=!0,!0):(f(r),!0)}return!1},i.prototype._unsubscribe=function(){var s=this._parentSubscriber;this._context=null,this._parentSubscriber=null,s.unsubscribe()},i}(d);function N(t){for(;t;){var i=t,s=i.closed,e=i.destination,n=i.isStopped;if(s||n)return!1;e&&e instanceof d?t=e:t=null}return!0}function ss(t,i,s){if(t){if(t instanceof d)return t;if(t[v])return t[v]()}return!t&&!i&&!s?new d(_):new d(t,i,s)}var is=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ts(t){return t}function es(t){return t.length===0?ts:t.length===1?t[0]:function(s){return t.reduce(function(e,n){return n(e)},s)}}var x=function(){function t(i){this._isScalar=!1,i&&(this._subscribe=i)}return t.prototype.lift=function(i){var s=new t;return s.source=this,s.operator=i,s},t.prototype.subscribe=function(i,s,e){var n=this.operator,r=ss(i,s,e);if(n?r.add(n.call(r,this.source)):r.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),p.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},t.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(s){p.useDeprecatedSynchronousErrorHandling&&(i.syncErrorThrown=!0,i.syncErrorValue=s),N(i)?i.error(s):console.warn(s)}},t.prototype.forEach=function(i,s){var e=this;return s=C(s),new s(function(n,r){var a;a=e.subscribe(function(h){try{i(h)}catch(l){r(l),a&&a.unsubscribe()}},r,n)})},t.prototype._subscribe=function(i){var s=this.source;return s&&s.subscribe(i)},t.prototype[is]=function(){return this},t.prototype.pipe=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return i.length===0?this:es(i)(this)},t.prototype.toPromise=function(i){var s=this;return i=C(i),new i(function(e,n){var r;s.subscribe(function(a){return r=a},function(a){return n(a)},function(){return e(r)})})},t.create=function(i){return new t(i)},t}();function C(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var ns=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),k=ns,rs=function(t){c(i,t);function i(s,e){var n=t.call(this)||this;return n.subject=s,n.subscriber=e,n.closed=!1,n}return i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var s=this.subject,e=s.observers;if(this.subject=null,!(!e||e.length===0||s.isStopped||s.closed)){var n=e.indexOf(this.subscriber);n!==-1&&e.splice(n,1)}}},i}(y),as=function(t){c(i,t);function i(s){var e=t.call(this,s)||this;return e.destination=s,e}return i}(d),H=function(t){c(i,t);function i(){var s=t.call(this)||this;return s.observers=[],s.closed=!1,s.isStopped=!1,s.hasError=!1,s.thrownError=null,s}return i.prototype[v]=function(){return new as(this)},i.prototype.lift=function(s){var e=new P(this,this);return e.operator=s,e},i.prototype.next=function(s){if(this.closed)throw new k;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),a=0;a<n;a++)r[a].next(s)},i.prototype.error=function(s){if(this.closed)throw new k;this.hasError=!0,this.thrownError=s,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),a=0;a<n;a++)r[a].error(s);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new k;this.isStopped=!0;for(var s=this.observers,e=s.length,n=s.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype._trySubscribe=function(s){if(this.closed)throw new k;return t.prototype._trySubscribe.call(this,s)},i.prototype._subscribe=function(s){if(this.closed)throw new k;return this.hasError?(s.error(this.thrownError),y.EMPTY):this.isStopped?(s.complete(),y.EMPTY):(this.observers.push(s),new rs(this,s))},i.prototype.asObservable=function(){var s=new x;return s.source=this,s},i.create=function(s,e){return new P(s,e)},i}(x),P=function(t){c(i,t);function i(s,e){var n=t.call(this)||this;return n.destination=s,n.source=e,n}return i.prototype.next=function(s){var e=this.destination;e&&e.next&&e.next(s)},i.prototype.error=function(s){var e=this.destination;e&&e.error&&this.destination.error(s)},i.prototype.complete=function(){var s=this.destination;s&&s.complete&&this.destination.complete()},i.prototype._subscribe=function(s){var e=this.source;return e?this.source.subscribe(s):y.EMPTY},i}(H),R=function(t){c(i,t);function i(s){var e=t.call(this)||this;return e._value=s,e}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),i.prototype._subscribe=function(s){var e=t.prototype._subscribe.call(this,s);return e&&!e.closed&&s.next(this._value),e},i.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k;return this._value},i.prototype.next=function(s){t.prototype.next.call(this,this._value=s)},i}(H);function hs(t,i){const s=$(t instanceof R?t.value:void 0),e=t.subscribe({next(n){s.value=n},error:i==null?void 0:i.onError});return F(s,n=>{t.next(n)}),T(()=>{e.unsubscribe()}),s}const os=J({__name:"demo",setup(t){const i=new R(0),s=hs(i);return z(()=>{F(s,n=>console.info("from watcher:",n));const e=i.subscribe(n=>console.info("from subscriber: ",n));T(()=>{e.unsubscribe()})}),(e,n)=>(U(),O("button",{onClick:n[0]||(n[0]=r=>s.value++)}," count: "+G(K(s)),1))}}),bs=JSON.parse('{"title":"useSubject","description":"","frontmatter":{"category":"@RxJS"},"headers":[],"relativePath":"rxjs/useSubject/index.md","filePath":"rxjs/useSubject/index.md"}'),ls={name:"rxjs/useSubject/index.md"},fs=Object.assign(ls,{setup(t){return(i,s)=>{const e=I,n=Y,r=M,a=q;return U(),O("div",null,[s[1]||(s[1]=o("h1",{id:"usesubject",tabindex:"-1"},[u("useSubject "),o("a",{class:"header-anchor",href:"#usesubject","aria-label":"Permalink to “useSubject”"},"​")],-1)),b(e,{fn:"useSubject"}),s[2]||(s[2]=o("p",null,[u("将 RxJS "),o("a",{href:"https://rxjs.dev/guide/subject",target:"_blank",rel:"noreferrer"},[o("code",null,"Subject")]),u(" 绑定到一个 "),o("code",null,"ref"),u(" 上，并在两者之间传播值变化。")],-1)),s[3]||(s[3]=o("h2",{id:"demo",tabindex:"-1"},[u("Demo "),o("a",{class:"header-anchor",href:"#demo","aria-label":"Permalink to “Demo”"},"​")],-1)),b(n,null,{default:Q(()=>[s[0]||(s[0]=o("p",{class:"demo-source-link"},[o("a",{href:"https://github.com/vueuse/vueuse/blob/main/packages/rxjs/useSubject/demo.vue",target:"_blank"},"source")],-1)),b(os)]),_:1}),s[4]||(s[4]=L("",12)),b(r,{fn:"useSubject"}),s[5]||(s[5]=o("h2",{id:"changelog",tabindex:"-1"},[u("Changelog "),o("a",{class:"header-anchor",href:"#changelog","aria-label":"Permalink to “Changelog”"},"​")],-1)),b(a,{fn:"useSubject"})])}}});export{bs as __pageData,fs as default};
